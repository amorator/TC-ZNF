{% extends 'base.j2.html' %}
{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/record.css') }}" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/components/progress.css') }}" />
{% endblock %}
{% block js %}
<script src="{{ url_for('static', filename='js/record.js') }}"></script>
{% endblock %}
{% block main %}

<section class="record-page">
  {% if request.args.get('embed') != '1' %}
  <h1 class="record-page__title">Запись видео</h1>
  {% endif %}
  <div class="record-page__body">
    <div class="record-page__videos">
      <div class="record-page__video">
        <label class="record-page__video-label">Экран</label>
        <video class="video" autoplay playsinline id="video-screen"></video>
      </div>
      <div class="record-page__video">
        <label class="record-page__video-label">Камера</label>
        <video class="video" autoplay playsinline id="video-camera"></video>
      </div>
    </div>
    <div class="record-page__menu">
      <div class="record-page__pult">
        <div class="record-page__source-selection">
          <label class="record-page__source-label">
            <input type="radio" name="source" value="camera" id="source-camera" checked>
            <span>Только камера</span>
          </label>
          <label class="record-page__source-label">
            <input type="radio" name="source" value="screen" id="source-screen">
            <span>Только экран</span>
          </label>
          <label class="record-page__source-label">
            <input type="radio" name="source" value="both" id="source-both">
            <span>Экран + камера</span>
          </label>
        </div>
        <button class="button" id="camera">Включить камеру</button>
        <button class="button" id="start">Начать запись</button>
        <button class="button" id="pause">Пауза</button>
        <button class="button" id="stop">Стоп</button>
      </div>
      <div class="record-page__settings">
        <div class="record-page__settings-time record-page__setting">
          <label class="record-page__setting-title">Длина записи:</label>
          <label class="record-page__setting-element" id="time">00:00:00</label>
        </div>
        <div class="record-page__settings-file-name record-page__setting">
          <label class="record-page__setting-title">Название файла:</label>
          <input
            class="record-page__setting-element"
            type="text"
            id="name"
            placeholder="Video"
            required
          />
        </div>
        <div class="record-page__settings-description record-page__setting">
          <label class="record-page__setting-title">Описание:</label>
          <textarea
            class="record-page__setting-element"
            id="desc"
            placeholder="Не обязательно..."
          ></textarea>
        </div>
        <button class="button" id="save">Сохранить</button>
        <input style="display: none" value="{{ did }}" id="did" />
        <input style="display: none" value="{{ sdid }}" id="sdid" />
        <div class="progress" id="uploadProgress" style="display:none;">
          <div class="progress-bar" id="uploadProgressBar" role="progressbar" style="width:0%"></div>
        </div>
        <div class="upload__container" style="display:none;">
          <span class="upload__status" id="uploadForm_Status"></span>
          <span id="uploadForm_Size"></span>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
